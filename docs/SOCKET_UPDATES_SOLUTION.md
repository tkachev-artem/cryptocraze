# Решение проблемы обновлений каждую секунду через Socket

## Проблема

Socket-клиент не получал обновления каждую секунду из-за того, что частота отправки событий контролируется сервером. Клиент только реагировал на события `priceUpdate`, `statsUpdate` и `dealProfitUpdate` от сервера.

## Решение

Создан гибридный хук `useLivePricesWithFallback` который:

1. **Использует Socket как приоритетный источник данных**
2. **Автоматически переключается на REST API** при проблемах с Socket
3. **Принудительно обновляет данные каждую секунду** через REST API при включенной опции

### Ключевые возможности

- `enableSecondUpdates: true` - включает принудительные обновления
- `updateInterval: 1000` - интервал обновлений в миллисекундах (1 секунда)
- `socketTimeout: 2000` - переключение на REST если Socket молчит дольше указанного времени

### Обновленные компоненты

1. **Trade.tsx** - обновления каждую секунду для основного торгового интерфейса
2. **Pro.tsx** - обновления каждую секунду для профессионального режима
3. **Chart.tsx** - обновления каждую секунду для графиков
4. **ProChart.tsx** - обновления каждую секунду для Pro графиков
5. **PriceTicker.tsx** - обновления каждую секунду для тикера цен

### Пример использования

```typescript
const { prices, isConnected } = useLivePricesWithFallback(['BTCUSDT'], {
  enableSecondUpdates: true,    // Включить принудительные обновления
  updateInterval: 1000,         // Каждую секунду
  socketTimeout: 2000          // Переключиться на REST если Socket молчит 2 сек
})
```

### Логика работы

1. При первом подключении использует Socket данные
2. Отслеживает время последнего обновления от Socket
3. Если Socket недоступен или долго не присылает данные - переключается на REST
4. Периодически запрашивает данные через `/binance/stats/${symbol}` API
5. Объединяет данные с приоритетом Socket над REST

### Результат

Теперь приложение гарантированно получает обновления цен каждую секунду независимо от состояния Socket-соединения или частоты серверных событий.