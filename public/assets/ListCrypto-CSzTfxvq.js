import{j as e}from"./vendor-query-xVwBccZt.js";import{r as s,b as t}from"./vendor-react-DaALiM5L.js";import{g as a,w as n,x as r}from"./trading-DauNLBUI.js";import{L as i}from"./index-3eMW2xY9.js";import"./vendor-redux-Bn24jW_n.js";import"./vendor-charts-ioXX35je.js";import"./vendor-socket-CUkmNz_4.js";const c=({crypto:s,index:t,total:a,onSelect:n})=>{const{iconUrl:i,loading:c}=r(s.id);return e.jsxs("div",{onClick:()=>{n(s.symbol)},className:"flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 cursor-pointer hover:bg-gray-50 transition-colors "+(t<a-1?"border-b border-gray-200":""),children:[e.jsxs("div",{className:"flex items-center justify-between flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:"w-6 h-6 sm:w-7 sm:h-7 rounded-full flex items-center justify-center",style:{backgroundColor:s.color},children:c?e.jsx("div",{className:"w-6 h-6 sm:w-7 sm:h-7 bg-gray-300 rounded-full animate-pulse"}):i?e.jsx("img",{src:i,alt:s.name,className:"w-6 h-6 sm:w-7 sm:h-7 rounded-full",onError:e=>{e.currentTarget.src=s.icon}}):e.jsx("img",{src:s.icon,alt:s.name,className:"w-6 h-6 sm:w-7 sm:h-7"})}),e.jsx("span",{className:"text-sm sm:text-base font-bold text-black",children:s.name})]}),e.jsx("span",{className:"text-xs sm:text-sm font-bold text-black opacity-50",children:(o=s.price,o>=1?o.toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:4}):o>=.01?o.toLocaleString("ru-RU",{minimumFractionDigits:4,maximumFractionDigits:6}):o.toLocaleString("ru-RU",{minimumFractionDigits:6,maximumFractionDigits:8}))})]}),e.jsx("div",{className:"w-8 sm:w-9 h-3 flex items-center justify-center",children:e.jsxs("span",{className:"text-[9px] sm:text-[10px] font-semibold",style:{color:s.change24h>=0?"#2EBD85":"#F6465D"},children:[s.change24h>=0?"+":"",s.change24h.toFixed(2),"%"]})})]});var o},o=()=>{const[r,o]=s.useState([]),[l,m]=s.useState(!0),[d,p]=s.useState("all"),[x,h]=s.useState([]),g=t(),{t:u}=a(),f=s.useMemo(()=>["BTCUSDT","ETHUSDT","SOLUSDT","XRPUSDT","DOGEUSDT"],[]),{prices:D}=n(f);s.useEffect(()=>{},[D]);const b=s.useCallback(()=>{m(!0);const e={BTCUSDT:"bitcoin",ETHUSDT:"ethereum",BNBUSDT:"binancecoin",ADAUSDT:"cardano",SOLUSDT:"solana",XRPUSDT:"ripple",DOTUSDT:"polkadot",DOGEUSDT:"dogecoin"},s={BTCUSDT:"Bitcoin",ETHUSDT:"Ethereum",ADAUSDT:"Cardano",SOLUSDT:"Solana",XRPUSDT:"Ripple",DOTUSDT:"Polkadot",DOGEUSDT:"Dogecoin"},t=f.map(t=>{const a=D[t],n=e[t],r=s[t];if(a&&Number.isFinite(a.price))return{id:n,name:r,symbol:t,price:a.price,change24h:a.priceChange24h||0,icon:"/trade/bitcoin.svg",color:"#ffffff"};return{id:n,name:r,symbol:t,price:{BTCUSDT:65e3+5e3*Math.random(),ETHUSDT:3200+300*Math.random(),SOLUSDT:140+20*Math.random(),XRPUSDT:.55+.1*Math.random(),DOGEUSDT:.21+.02*Math.random()}[t]||100*Math.random(),change24h:10*(Math.random()-.5),icon:"/trade/bitcoin.svg",color:"#000000"}}).filter(e=>e.id&&e.name);h(t),m(!1)},[D,f]),S=s.useCallback(e=>{switch(d){case"gain":return e.filter(e=>e.change24h>0);case"loss":return e.filter(e=>e.change24h<0);default:return e}},[d]);s.useEffect(()=>{b()},[b]),s.useEffect(()=>{const e={BTCUSDT:"bitcoin",ETHUSDT:"ethereum",BNBUSDT:"binancecoin",ADAUSDT:"cardano",SOLUSDT:"solana",XRPUSDT:"ripple",DOTUSDT:"polkadot",DOGEUSDT:"dogecoin"},s={BTCUSDT:"Bitcoin",ETHUSDT:"Ethereum",ADAUSDT:"Cardano",SOLUSDT:"Solana",XRPUSDT:"Ripple",DOTUSDT:"Polkadot",DOGEUSDT:"Dogecoin"},t=f.map(t=>{const a=e[t],n=s[t],r=D[t];return{id:a,name:n,symbol:t,price:r&&Number.isFinite(r.price)?r.price:{BTCUSDT:65e3,ETHUSDT:3200,SOLUSDT:140,XRPUSDT:.55,DOGEUSDT:.218}[t]||100,change24h:r&&Number.isFinite(r.priceChange24h)?r.priceChange24h:0,icon:"/trade/bitcoin.svg",color:"#ffffff"}});h(t)},[D,f]),s.useEffect(()=>{if(x.length>0){const e=(e=>{const s={};return e.forEach(e=>{const t=e.name.charAt(0).toUpperCase();t in s||(s[t]=[]),s[t].push(e)}),Object.keys(s).sort().map(e=>({letter:e,cryptos:s[e].sort((e,s)=>e.name.localeCompare(s.name))}))})(S(x));o(e)}},[d,x,S]);const T=e=>{const s=new URLSearchParams(window.location.search).get("return");g("pro"===s?`/trade/pro?pair=${encodeURIComponent(e)}`:`/trade?pair=${encodeURIComponent(e)}`)};return e.jsxs(e.Fragment,{children:[e.jsx(i,{isLoading:l}),e.jsxs("div",{className:"bg-[#F1F7FF] min-h-screen pb-[env(safe-area-inset-bottom)]",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white",children:e.jsx("div",{className:"flex items-center justify-between gap-1 px-2 sm:px-3 pt-3 sm:pt-4 pb-2",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{className:"w-9 h-9 sm:w-10 sm:h-10 flex items-center justify-center rounded-full hover:bg-gray-100",onClick:()=>{g("/trade")},children:e.jsx("img",{src:"/top-menu/back.svg",alt:u("common.back"),className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-black",children:u("trading.selectPair")})]})})}),e.jsx("div",{className:"px-3 sm:px-4 py-3 sm:py-4 bg-white",children:e.jsxs("div",{className:"flex bg-gray-100 rounded-full gap-0.5 sm:gap-1",children:[e.jsx("button",{onClick:()=>{p("all")},className:"flex-1 py-2.5 sm:py-3.5 px-2 sm:px-3 rounded-full text-xs sm:text-sm font-bold transition-colors "+("all"===d?"bg-[#0C54EA] text-white":"text-black opacity-30"),children:u("trading.crypto")||"Крипта"}),e.jsxs("button",{onClick:()=>{p("loss")},className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 py-2.5 sm:py-3.5 px-2 sm:px-3 rounded-full text-xs sm:text-sm font-bold transition-colors "+("loss"===d?"bg-[#0C54EA]":"text-black"),children:[e.jsx("span",{className:"loss"===d?"text-white":"text-black opacity-30",children:u("trading.loss")||"Падение"}),e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-[#F6465D] rounded-2xl flex items-center justify-center",children:e.jsx("img",{src:"/dashboard/up.svg",alt:"Down",className:"w-2 h-2.5 sm:w-2.5 sm:h-3.5 rotate-180"})})]}),e.jsxs("button",{onClick:()=>{p("gain")},className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 py-2.5 sm:py-3.5 px-2 sm:px-3 rounded-full text-xs sm:text-sm font-bold transition-colors "+("gain"===d?"bg-[#0C54EA]":"text-black"),children:[e.jsx("span",{className:"gain"===d?"text-white":"text-black opacity-30",children:u("trading.gain")||"Рост"}),e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-[#2EBD85] rounded-2xl flex items-center justify-center",children:e.jsx("img",{src:"/dashboard/up.svg",alt:"Up",className:"w-2 h-2.5 sm:w-2.5 sm:h-3.5"})})]})]})}),e.jsx("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4 space-y-2 sm:space-y-3 py-3 sm:py-4",children:r.map(s=>e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("h2",{className:"text-sm sm:text-base font-bold text-black",children:s.letter}),e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl overflow-hidden",children:s.cryptos.map((t,a)=>e.jsx(c,{crypto:t,index:a,total:s.cryptos.length,onSelect:T},t.id))})]},s.letter))})]})]})};export{o as default};
