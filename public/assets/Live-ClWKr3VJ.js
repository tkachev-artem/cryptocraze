import{j as e}from"./vendor-query-xVwBccZt.js";import{r as t}from"./vendor-react-DaALiM5L.js";import{g as s,w as i,N as r,O as a,P as n}from"./trading-DauNLBUI.js";import"./vendor-redux-Bn24jW_n.js";import"./vendor-charts-ioXX35je.js";import"./vendor-socket-CUkmNz_4.js";const l=({isConnected:t})=>{const{t:i}=s(),r=i(t?"liveBadge.live":"liveBadge.offline"),a=t?"bg-[#2EBD85]":"bg-[#F6465D]",n=t?"ring-[#2EBD85]/30":"ring-[#F6465D]/30";return e.jsxs("span",{role:"status","aria-live":"polite","aria-label":i(t?"liveBadge.ariaLiveActive":"liveBadge.ariaLiveOffline"),tabIndex:0,className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-semibold text-white ${a} ring-4 ${n}`,children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-white animate-pulse","aria-hidden":"true"}),r]})},c=e=>{if(!Number.isFinite(e)||e<=0)return"-";return new Date(e).toLocaleTimeString()},d=({symbols:r=["BTCUSDT","ETHUSDT","SOLUSDT"]})=>{const{prices:a,isConnected:n}=i(r),{t:d}=s(),o=t.useMemo(()=>{const e=new Set(r.map(e=>e.toUpperCase()));return Array.from(e)},[r]);return e.jsxs("section",{"aria-label":d("priceTicker.aria"),className:"w-full",children:[e.jsx("div",{className:"mb-3",children:e.jsx(l,{isConnected:n})}),e.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:o.map(t=>{const s=a[t];return e.jsxs("div",{tabIndex:0,role:"article","aria-label":d("priceTicker.cardAria",{symbol:t}),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||e.preventDefault()},className:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-200 focus:outline-none focus:ring-2 focus:ring-[#0C54EA] focus:ring-offset-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:t}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:(i=s?s.price:NaN,Number.isFinite(i)?i.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"-")})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[e.jsxs("span",{children:[d("priceTicker.updated")," ",c(s?s.timestamp:0)]}),s&&"number"==typeof s.priceChange24h&&Number.isFinite(s.priceChange24h)&&e.jsxs("span",{className:s.priceChange24h>=0?"text-[#2EBD85]":"text-[#F6465D]",children:[s.priceChange24h.toFixed(2),"%"]})]})]},t);var i})})]})},o=({symbol:i})=>{const{t:l}=s(),{height:c}=(()=>{const[e,s]=t.useState({width:window.innerWidth,height:window.innerHeight});return t.useEffect(()=>{const e=()=>{s({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e})(),[d,o]=t.useState(null),[m,x]=t.useState(null),[h,u]=t.useState(0),[g,p]=t.useState(null),f=t.useMemo(()=>String(i).trim().toUpperCase(),[i]);t.useEffect(()=>{const e=r();a([f]);const t=e=>{if(!e.symbol)return;if(e.symbol.toUpperCase()!==f)return;const t=e.price,s=new Date(e.timestamp);null!==g&&u((t-g)/g*100),p(d),o(t),x(s)};return e.on("priceUpdate",t),()=>{e.off("priceUpdate",t),n([f])}},[f,d,g]);return e.jsxs("section",{"aria-label":`Live price ${f}`,className:"w-full rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-200",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:f}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(v=d,null===v?"—":v.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:6}))}),Math.abs(h)>.01&&e.jsx("div",{className:"text-sm font-medium "+(h>=0?"text-[#2EBD85]":"text-[#F6465D]"),children:(b=h,`${b>=0?"+":""}${b.toFixed(2)}%`)})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx("span",{children:l("ui.chart.lastUpdate")}),e.jsx("span",{className:"font-medium",children:(j=m,j?j.toLocaleTimeString():"—")})]}),e.jsx("div",{className:"mt-3 flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-[#2EBD85] animate-pulse"}),e.jsx("span",{className:"text-xs text-gray-600",children:l("ui.chart.realTimeUpdates")})]})}),e.jsx("div",{className:"mt-4 w-full bg-gray-50 rounded border-2 border-dashed border-gray-200 flex items-center justify-center text-gray-500 text-sm",style:{height:Math.max(100,Math.min(400,Math.floor(.3*c)))},children:l("ui.chart.chartPlaceholder")})]});var j,b,v},m=()=>{const{t:t}=s();return e.jsxs("main",{className:"min-h-dvh bg-[#F1F7FF] p-4",children:[e.jsxs("header",{className:"mb-4",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:t("live.title")}),e.jsx("p",{className:"text-sm text-gray-600",children:t("live.subtitle")})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(d,{symbols:["BTCUSDT","ETHUSDT","SOLUSDT"]}),e.jsx(o,{symbol:"BTCUSDT"})]})]})};export{m as default};
