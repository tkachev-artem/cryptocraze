import{j as e}from"./vendor-query-xVwBccZt.js";import{b as s,r as t}from"./vendor-react-DaALiM5L.js";import{u as i}from"./index-3eMW2xY9.js";import{u as r}from"./usePremium-bnyADgyk.js";import{u as a,t as l,g as c,A as m,v as n}from"./trading-DauNLBUI.js";import"./vendor-redux-Bn24jW_n.js";import"./vendor-charts-ioXX35je.js";import"./vendor-socket-CUkmNz_4.js";const d=()=>{const d=s(),[o,x]=t.useState("month"),[u,h]=t.useState(!1),{user:p,isLoading:j}=i(),{isPremium:g}=r(),f=a(),{toast:v}=l(),{t:b}=c();t.useEffect(()=>{},[null==p?void 0:p.id,j]);const N=()=>{(async e=>{if(!(null==p?void 0:p.id))return;const s=localStorage.getItem("telegramId")??"",t="month"===e?499:5199;h(!0);try{const i=await fetch(`${m}/premium/subscription`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userId:p.id,planType:e,telegramId:s,amount:t})});if(!i.ok)return void v({title:b("premium.activateErrorTitle")||"Не удалось активировать PRO",description:b("premium.tryLater")||"Попробуйте позже",variant:"destructive"});const r=await i.json();Boolean(r.success??!0)?(f(n({isPremium:!0})),v({title:b("premium.activated")||"PRO активирован",description:b("premium.enabled")||"Premium режим включён"}),setTimeout(()=>{d("/home/settings")},300)):v({title:b("premium.activateErrorTitle")||"Ошибка активации PRO",description:b("premium.unexpected")||"Неожиданный ответ сервера",variant:"destructive"})}catch(i){v({title:b("common.error"),description:b("premium.network")||"Проверьте соединение и попробуйте ещё раз",variant:"destructive"})}finally{h(!1)}})(o)};return e.jsxs("div",{className:"bg-white min-h-screen pb-[env(safe-area-inset-bottom)]",children:[e.jsx("div",{className:"sticky top-0 z-10",children:e.jsx("div",{className:"relative h-[240px] rounded-b-[20px] bg-[radial-gradient(50%_50%_at_50%_50%,_#3C76F0_0%,_#0C46BE_100%)]",children:e.jsxs("div",{className:"flex items-center justify-between px-2 pt-4 pb-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10",onClick:()=>{d(-1)},children:e.jsx("img",{src:"/top-menu/back.svg",alt:"Back",className:"w-6 h-6 brightness-0 invert"})})}),e.jsx("div",{className:"absolute top-12 left-1/2 -translate-x-1/2",children:e.jsx("img",{src:"/premium/logo.svg",alt:"Premium Logo",className:"w-32 h-44"})})]})})}),e.jsxs("div",{className:"px-4 py-4 space-y-5",children:[e.jsx("h2",{className:"text-2xl font-bold text-black text-center",children:b("settings.premium.goPremium")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-[#0C54EA] rounded-[10px] flex items-center justify-center",children:e.jsx("img",{src:"/premium/check.svg",alt:"Check",className:"w-3 h-3"})}),e.jsx("span",{className:"text-black font-medium text-sm",children:b("premium.noAds")||"Нет рекламы"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-[#0C54EA] rounded-[10px] flex items-center justify-center",children:e.jsx("img",{src:"/premium/check.svg",alt:"Check",className:"w-3 h-3"})}),e.jsx("span",{className:"text-black font-medium text-sm",children:b("premium.moreOrders")||"Увеличенный лимит открытых ордеров"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-[#0C54EA] rounded-[10px] flex items-center justify-center mt-0.5",children:e.jsx("img",{src:"/premium/check.svg",alt:"Check",className:"w-3 h-3"})}),e.jsx("span",{className:"text-black font-medium text-sm",children:b("premium.moreMultipliers")||"Доступно больше опций мультипликатора"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-[#0C54EA] rounded-[10px] flex items-center justify-center",children:e.jsx("img",{src:"/premium/check.svg",alt:"Check",className:"w-3 h-3"})}),e.jsx("span",{className:"text-black font-medium text-sm",children:b("premium.highlighted")||"Ваш аккаунт выделен в рейтинге"})]})]})]}),e.jsxs("div",{className:"px-4 py-4 space-y-4",children:[e.jsx("div",{className:"relative p-3 rounded-xl cursor-pointer transition-all w-full "+("month"===o?"bg-[#0C54EA]":"bg-white border border-gray-200"),onClick:()=>{x("month")},children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"flex h-5 w-16 justify-center items-center rounded-[12px] bg-[#F5A600]",children:e.jsx("span",{className:"text-black font-medium text-xs",children:b("premium.monthly")||"в месяц"})}),e.jsx("div",{className:"font-bold text-2xl "+("month"===o?"text-white":"text-black"),children:"499,00 ₽"})]}),e.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:"month"===o?e.jsx("img",{src:"/premium/radio.svg",alt:"Selected",className:"w-4 h-4"}):e.jsx("img",{src:"/premium/radio-bg.svg",alt:"Unselected",className:"w-4 h-4"})})]})}),e.jsx("div",{className:"relative p-3 rounded-xl cursor-pointer transition-all w-full "+("year"===o?"bg-[#0C54EA]":"bg-white border border-gray-200"),onClick:()=>{x("year")},children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex h-5 w-16 justify-center items-center rounded-[12px] bg-[#F5A600]",children:e.jsx("span",{className:"text-black font-medium text-xs",children:b("premium.yearly")||"в год"})}),e.jsx("div",{className:"flex h-5 w-16 justify-center items-center rounded-[12px] bg-[#2EBD85]",children:e.jsx("span",{className:"text-white font-semibold text-xs",children:"-13%"})})]}),e.jsx("div",{className:"font-bold text-2xl "+("year"===o?"text-white":"text-black"),children:"5 199,00 ₽"})]}),e.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:"year"===o?e.jsx("img",{src:"/premium/radio.svg",alt:"Selected",className:"w-4 h-4"}):e.jsx("img",{src:"/premium/radio-bg.svg",alt:"Unselected",className:"w-4 h-4"})})]})})]}),e.jsx("div",{className:"px-4",children:e.jsx("p",{className:"text-black max-w-[255px] mx-auto font-medium text-xs text-center leading-relaxed",children:"month"===o?b("premium.chargeMonthly")||"499,00 ₽ будут списываться автоматически каждый месяц до тех пор, пока вы не отмените подписку":b("premium.chargeYearly")||"5 199,00 ₽ будут списываться автоматически каждый год до тех пор, пока вы не отмените подписку"})}),e.jsx("div",{className:"px-4 py-4",children:j?e.jsx("div",{className:"w-full bg-gray-400 text-white font-bold text-base py-3 px-6 rounded-full text-center",children:b("common.loading")}):g?e.jsxs("div",{className:"w-full bg-[#F5A600] text-black font-bold text-base py-3 px-6 rounded-full text-center flex items-center justify-center gap-2",children:[e.jsx("img",{src:"/crown.png",alt:"premium",className:"w-6 h-6"}),e.jsx("span",{children:b("settings.premium.pro")})]}):e.jsx("button",{onClick:N,disabled:u,className:`w-full font-bold text-base py-3 px-6 rounded-full transition-colors ${u?"bg-gray-400 cursor-not-allowed":"bg-[#0C54EA] hover:bg-[#0A47C7]"} text-white`,"aria-label":b("settings.premium.goPremium"),tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||N()},children:b(u?"common.loading":"settings.premium.goPremium")})})]})};export{d as default};
