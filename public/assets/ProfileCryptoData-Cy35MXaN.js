import{j as e}from"./vendor-query-xVwBccZt.js";import{b as s,r as t}from"./vendor-react-DaALiM5L.js";import{u as r}from"./index-3eMW2xY9.js";import{g as l,h as a,A as i}from"./trading-DauNLBUI.js";import"./vendor-redux-Bn24jW_n.js";import"./vendor-charts-ioXX35je.js";import"./vendor-socket-CUkmNz_4.js";const n=({onShowAnalytics:n})=>{const{user:d,isLoading:o}=r(),{t:c}=l(),x=s(),[m,f]=t.useState(c("common.na"));t.useEffect(()=>{(async()=>{if(null==d?void 0:d.id)try{const e=`${i}/rating?period=month&offset=0&limit=50`,s=await fetch(e,{credentials:"include"});if(!s.ok)return void f(c("common.na"));const t=await s.json(),r=(Array.isArray(t)?t:[]).find(e=>e.userId===d.id);r&&"number"==typeof r.rank&&r.rank>=1?f(`#${String(r.rank)}`):f(c("common.na"))}catch{f(c("common.na"))}else f(c("common.na"))})()},[null==d?void 0:d.id,c]);const u=(null==d?void 0:d.rewardsCount)??0,p=(null==d?void 0:d.tradesCount)??1,j=null!=(null==d?void 0:d.maxLoss)?`-${a(Math.abs(Number(d.maxLoss)))}`:c("common.na"),h=()=>{x("/rating")},b=()=>{x("/deals")};return e.jsx("div",{className:"px-4 py-4",children:e.jsx("div",{className:"grid grid-cols-2 max-[360px]:grid-cols-1 gap-2",children:o||!d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-3 h-28 animate-pulse order-1"}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-3 h-28 animate-pulse order-2"}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-3 h-28 animate-pulse order-3"}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-3 h-28 animate-pulse order-4"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-3 flex flex-col justify-between gap-5 cursor-pointer order-1",onClick:h,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h())},role:"button",tabIndex:0,"aria-label":c("rating.open30d"),children:[e.jsx("div",{className:"flex items-start  justify-between",children:e.jsxs("div",{className:"flex flex-col justify-start items-start",children:[e.jsx("p",{className:"text-xs text-black opacity-50",children:c("rating.last30d")}),e.jsx("p",{className:"text-2xl font-bold",children:m})]})}),e.jsx("div",{className:"flex items-center flex-row gap-1 justify-end w-full",children:e.jsx("div",{className:"bg-[#0C54EA] text-white text-xs font-bold px-2.5 py-2.5 rounded-full w-16 h-6 flex items-center justify-center",children:"Топ"})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-3 flex flex-col justify-between relative order-2 cursor-pointer",onClick:()=>{null==n||n()},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),null==n||n())},role:"button",tabIndex:0,"aria-label":c("profile.analytics")||"Аналитика",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex flex-col justify-start items-start",children:[e.jsx("p",{className:"text-xs text-black opacity-50",children:c("profile.analytics")||"Аналитика"}),e.jsx("p",{className:"text-2xl font-bold mt-5",children:p})]}),e.jsx("div",{className:"w-[54px] h-[54px] bg-[#E4F0FF] rounded-full flex items-center justify-center",children:e.jsx("img",{src:"/pickaxe.svg",alt:"analytics",className:"w-[32px] h-[32px]"})})]}),e.jsx("div",{className:"flex items-center flex-row justify-end mt-3",children:e.jsx("div",{className:"bg-[#0C54EA] text-white text-xs font-bold px-3 py-1.5 rounded-full h-7 flex items-center justify-center",children:"Аналитика"})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-3 flex flex-col justify-between relative order-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex flex-col justify-start items-start",children:[e.jsx("p",{className:"text-xs text-black opacity-50",children:c("profile.rewards")||"Награды"}),e.jsx("p",{className:"text-2xl font-bold mt-5",children:u})]}),e.jsx("div",{className:"w-[54px] h-[54px] bg-[#E4F0FF] rounded-full flex items-center justify-center",children:e.jsx("img",{src:"/w-cup.svg",alt:"awards",className:"w-[32px] h-[26px]"})})]}),e.jsx("div",{className:"flex items-center flex-row justify-end mt-3",children:e.jsx("button",{type:"button",className:"bg-[#0C54EA] text-white text-xs font-bold px-3 py-1.5 rounded-full h-7 flex items-center justify-center","aria-label":c("profile.rewards")||"Награды",onClick:()=>{x("/rewards")},children:c("profile.rewards")||"Награды"})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-3 flex flex-col justify-between relative cursor-pointer order-4",onClick:b,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),b())},role:"button",tabIndex:0,"aria-label":c("deals.openList"),children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex flex-col justify-start items-start",children:[e.jsx("p",{className:"text-xs text-black opacity-50",children:c("trading.tradesShort")}),e.jsx("p",{className:"text-2xl font-bold mt-5",children:p})]})}),e.jsxs("div",{className:"flex items-center flex-row gap-1 justify-between",children:[e.jsx("div",{className:"flex flex-row justify-start items-center",children:e.jsx("div",{className:"w-[54px] h-[54px] bg-[#E4F0FF] rounded-full flex items-center justify-center absolute top-3 right-3",children:e.jsx("img",{src:"/transactions.svg",alt:"transactions",className:"w-[32px] h-[30px]"})})}),e.jsxs("div",{className:"flex flex-row justify-between items-center gap-1 w-full",children:[e.jsx("p",{className:"text-sm font-medium text-red-500",children:j}),e.jsx("div",{className:"bg-[#0C54EA] text-white text-xs font-bold px-2.5 py-2.5 rounded-full w-16 h-6 flex items-center justify-center",children:"Сделки"})]})]})]})]})})})};export{n as default};
